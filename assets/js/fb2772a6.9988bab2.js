"use strict";(self.webpackChunksubnet=self.webpackChunksubnet||[]).push([[215],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=c(n),h=i,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||a;return n?r.createElement(m,s(s({ref:t},d),{},{components:n})):r.createElement(m,s({ref:t},d))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,s=new Array(a);s[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var c=2;c<a;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},550:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var r=n(3117),i=(n(7294),n(3905));const a={},s=void 0,o={unversionedId:"features/priority_inbox/design",id:"features/priority_inbox/design",title:"design",description:"---",source:"@site/docs/features/priority_inbox/design.md",sourceDirName:"features/priority_inbox",slug:"/features/priority_inbox/design",permalink:"/docs/next/features/priority_inbox/design",draft:!1,editUrl:"https://github.com/upstter/docs/features/priority_inbox/design.md",tags:[],version:"current",lastUpdatedBy:"Aviv Eyal",lastUpdatedAt:1660422095,formattedLastUpdatedAt:"Aug 13, 2022",frontMatter:{}},l={},c=[{value:"sidebar_label: Design",id:"sidebar_label-design",level:2},{value:"Priority Inbox Messages",id:"priority-inbox-messages",level:2},{value:"Setup",id:"setup",level:2},{value:"Sending a Message",id:"sending-a-message",level:2},{value:"Priority Inbox Display",id:"priority-inbox-display",level:2},{value:"Message Display",id:"message-display",level:2}],d={toc:c};function p(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("hr",null),(0,i.kt)("p",null,"id: design\ntitle: Priority Inbox"),(0,i.kt)("h2",{id:"sidebar_label-design"},"sidebar_label: Design"),(0,i.kt)("h2",{id:"priority-inbox-messages"},"Priority Inbox Messages"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Priority inbox messages are similar in content to user-to-user messages. e.g. they may have rich text, multimedia content and links to paid content items, in addition they have a subject text field that is designed to provide a summary for display in inboxes.")),(0,i.kt)("h2",{id:"setup"},"Setup"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"User decides if he'd like to enable the priority inbox feature. When enabled, user is able to receive priority inbox messages and get paid for openning them. When disabled, other users can't send the user priority inbox messages."),(0,i.kt)("li",{parentName:"ol"},"User is prompted to enter the price in coin per message he opens and reads."),(0,i.kt)("li",{parentName:"ol"},"Feature availability and price is added to the user's identity bundle and is published with it.")),(0,i.kt)("h2",{id:"sending-a-message"},"Sending a Message"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Sender creates message designated to the receiving user's priority inbox. Sender decides how many coins to pay for the receiver if he opens the message and reads it."),(0,i.kt)("li",{parentName:"ol"},"Sender's client creates, signs and submits to the transactions mem-pool a transaction to move funds to a new hash-locked account with the payment amount specified by the sender. The hash-locked account funds can only be redeemed by receiver's user using his private wallet key and the hash's preimage."),(0,i.kt)("li",{parentName:"ol"},"Sender's client waits for the hash-locked account to be created on-chain and sends a message to the receiver user with the hash-lock preimage. The preimage enables the receiver to issue a blockchain transaction to redeem the funds locked in the hash-lock account using his wallet account private key.")),(0,i.kt)("h2",{id:"priority-inbox-display"},"Priority Inbox Display"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Receiver's client receives a priority message. It checks that the hash-lock account exists onchain before adding it to the receiver's priority inbox."),(0,i.kt)("li",{parentName:"ol"},"Priority Inbox messages appears in the recipient's inbox. The inbox displays the message's subject, sender's nickname, price paid for an open, and icon.")),(0,i.kt)("h2",{id:"message-display"},"Message Display"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Receiver user opens the message and reads it."),(0,i.kt)("li",{parentName:"ol"},"In response to the message openning interaction, receiver's client sends a blockchain transaction to move the funds locked in the hash-locked account to the receiver's acount. This requires sending the pre-image and signing the transaction with the user's account private key specified in the hash-locked account.")),(0,i.kt)("hr",null),(0,i.kt)("p",null,"TODO: think about pay-for-reply."))}p.isMDXComponent=!0}}]);